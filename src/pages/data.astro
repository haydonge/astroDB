---
import LinkCard from "@/components/LinkCard.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { Link } from "astro:db";
import { db } from "astro:db";
import APICard from "../components/AIPCard";
const data1 = ["Chris", "Jon", "Jes"];

//自定义数据类型。
type Post = {
  userId: number;
  id: number;
  title: string;
  body: string;
};
const res = await fetch ("https://jsonplaceholder.typicode.com/posts") ;
 //endpoint inout
const data2 : Post [] = await res.json();

import data3json from "../data/data3.json"
import data3ts from "../data/data3.ts"
import { getCollection } from "astro:content";

const data3Glob = await Astro.glob ("../data/**/*.md")
const links = await db.select().from(Link);

const data4 =  await getCollection("product")
---

<BaseLayout>
   <div class="grid gap-6 grid-cols-[repeat(auto-fit,_minmax(280px,_1fr))] items-start">
    <ul>
    {data1.map((i) => <li> {i} </li>)}
</ul>
<ul>
    {data2.slice(0,4).map((post) => <li> {post.title} </li>)}
</ul>
<ul>
    {data3json.map((post) => <li> {post.name} {post.age}</li>)}

</ul>

    {data3ts.map((post) => <li> {post.nationality} {post.name}</li>)}
</ul>
<ul>
    <!-- <fragment set:html = {data3Glob.map((post) => post.compiledContent())} />
    {
        data3Glob.map(( post) => {
            const Content = post.Content ;
            return <Content />;
        })
    } -->
</ul>

<ul>
     {data4.map((ii) => <li>{ii.data.name}</li>)}
</ul>

<h2> 5 API Card</h2>
   <APICard client:load />
   </div>


   <div class="grid gap-6 grid-cols-[repeat(auto-fit,_minmax(280px,_1fr))] items-start">
  

   </div>

  <div
    class="grid gap-6 grid-cols-[repeat(auto-fit,_minmax(280px,_1fr))] items-start"
  >
    {links.map((link) => <LinkCard link={link} />)}
  </div>
</BaseLayout>